{
  "name": "code_search",
  "description": "使用正则表达式搜索代码内容。在指定目录下递归搜索文件内容中匹配 pattern 的行。",
  "category": "devtools",

  "input": {
    "type": "object",
    "properties": {
      "pattern": {
        "type": "string",
        "description": "正则表达式搜索模式"
      },
      "path": {
        "type": "string",
        "description": "搜索的根目录（绝对路径），省略则使用当前工作目录"
      },
      "glob": {
        "type": "string",
        "description": "文件过滤 glob（如 '*.ts'、'*.py'），省略则搜索所有文本文件"
      },
      "context_lines": {
        "type": "number",
        "description": "每个匹配前后显示的上下文行数（默认 0）"
      },
      "limit": {
        "type": "number",
        "description": "返回的匹配数上限（默认 50）"
      }
    },
    "required": ["pattern"]
  },

  "output": {
    "type": "object",
    "properties": {
      "matches": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "file": { "type": "string" },
            "line": { "type": "number" },
            "content": { "type": "string" }
          }
        },
        "description": "匹配结果列表"
      },
      "total_matches": {
        "type": "number",
        "description": "匹配总数"
      },
      "files_searched": {
        "type": "number",
        "description": "搜索的文件数"
      },
      "error": {
        "type": "string",
        "description": "错误信息"
      }
    },
    "required": ["matches"]
  },

  "mode": "code",
  "calls": [],
  "version": "1.0.0",
  "tags": ["devtools", "search", "builtin"],
  "author": "openevo-team",
  "timeout": 30000,
  "retry": 0
}
